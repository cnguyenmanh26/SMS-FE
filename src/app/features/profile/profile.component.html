<div class="min-h-screen bg-gray-50 py-8 px-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900">Thông tin cá nhân</h1>
            <p class="text-gray-600 mt-2">Xem thông tin sinh viên và kết quả học tập</p>
        </div>

        <!-- Loading State -->
        <div *ngIf="loading" class="flex justify-center items-center py-12">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
        </div>

        <!-- Error State -->
        <div *ngIf="error && !loading" class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
            <p class="text-red-800">{{ error }}</p>
        </div>

        <!-- Content -->
        <div *ngIf="!loading && student" class="space-y-6">
            <!-- Student Information Card -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4 border-b pb-2">Thông tin sinh viên</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <p class="text-sm text-gray-600">Mã sinh viên</p>
                        <p class="font-semibold text-gray-900">{{ student.studentCode }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600">Họ và tên</p>
                        <p class="font-semibold text-gray-900">{{ student.fullName }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600">Giới tính</p>
                        <p class="font-semibold text-gray-900">{{ student.gender }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600">Ngày sinh</p>
                        <p class="font-semibold text-gray-900">{{ student.dateOfBirth }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600">Lớp</p>
                        <p class="font-semibold text-gray-900">{{ student.className }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600">Khóa</p>
                        <p class="font-semibold text-gray-900">{{ student.course }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600">Email</p>
                        <p class="font-semibold text-gray-900">{{ student.email }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600">Số điện thoại</p>
                        <p class="font-semibold text-gray-900">{{ student.phoneNumber }}</p>
                    </div>
                    <div class="md:col-span-2">
                        <p class="text-sm text-gray-600">Địa chỉ</p>
                        <p class="font-semibold text-gray-900">{{ student.address }}</p>
                    </div>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <p class="text-sm text-gray-600">Tổng số môn</p>
                    <p class="text-3xl font-bold text-indigo-600">{{ scores.length }}</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <p class="text-sm text-gray-600">Môn đạt</p>
                    <p class="text-3xl font-bold text-green-600">{{ passedScores.length }}</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <p class="text-sm text-gray-600">Điểm trung bình</p>
                    <p class="text-3xl font-bold text-blue-600">{{ averageScore }}</p>
                </div>
            </div>

            <!-- Scores Table -->
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <div class="p-6 border-b">
                    <h2 class="text-xl font-semibold text-gray-900">Kết quả học tập</h2>
                </div>

                <div *ngIf="scores.length === 0" class="p-6 text-center text-gray-500">
                    Chưa có điểm nào
                </div>

                <div *ngIf="scores.length > 0" class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Môn học</th>
                                <th
                                    class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Điểm QT</th>
                                <th
                                    class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Điểm CK</th>
                                <th
                                    class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Điểm TK</th>
                                <th
                                    class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Trạng thái</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr *ngFor="let score of scores" class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{
                                    score.subjectName }}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-700">{{
                                    score.processScore }}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-700">{{
                                    score.componentScore }}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-center font-semibold text-gray-900">
                                    {{ score.finalScore }}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-center">
                                    <span
                                        [class]="score.status === 'ĐẠT' ? 'px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800' : 'px-3 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800'">
                                        {{ score.status }}
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Logout Button -->
            <div class="flex justify-center pt-4">
                <button (click)="authService.logout()"
                    class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                    Đăng xuất
                </button>
            </div>
        </div>
    </div>
</div>